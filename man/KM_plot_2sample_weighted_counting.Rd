% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/kmplotting_helpers.R
\name{KM_plot_2sample_weighted_counting}
\alias{KM_plot_2sample_weighted_counting}
\title{Plot Weighted Kaplan-Meier Curves for Two Samples (Counting Process Format)}
\usage{
KM_plot_2sample_weighted_counting(
  dfcount,
  show.cox = TRUE,
  cox.cex = 0.725,
  show.logrank = FALSE,
  logrank.cex = 0.725,
  cox.eps = 0.001,
  lr.eps = 0.001,
  show_arm_legend = TRUE,
  arms = c("treat", "control"),
  put.legend.arms = "left",
  stop.onerror = TRUE,
  check.KM = TRUE,
  put.legend.cox = "topright",
  put.legend.lr = "topleft",
  lr.digits = 2,
  cox.digits = 2,
  tpoints.add = c(0),
  by.risk = NULL,
  Xlab = "time",
  Ylab = "proportion surviving",
  col.0 = "black",
  col.1 = "blue",
  show.med = TRUE,
  med.digits = 2,
  med.font = 4,
  conf.int = FALSE,
  conf_level = 0.95,
  choose_ylim = FALSE,
  arm.cex = 0.7,
  quant = 0.5,
  qlabel = "median =",
  med.cex = 0.725,
  ymed.offset = 0.1,
  xmed.fraction = 0.8,
  risk.cex = 0.725,
  ltys = c(1, 1),
  lwds = c(1, 1),
  censor.mark.all = TRUE,
  censor.cex = 0.5,
  show.ticks = TRUE,
  risk.set = TRUE,
  ymin = 0,
  ymax = 1,
  ymin.del = 0.035,
  ymin2 = NULL,
  risk_offset = 0.125,
  risk_delta = 0.05,
  y.risk0 = NULL,
  show.Y.axis = TRUE,
  cex_Yaxis = 1,
  y.risk1 = NULL,
  add.segment = FALSE,
  risk.add = NULL,
  xmin = 0,
  xmax = NULL,
  x.truncate = NULL,
  time.zero = 0,
  prob.points = NULL
)
}
\arguments{
\item{dfcount}{List containing precomputed survival data (see Details).}

\item{show.cox}{Logical; whether to display Cox model results (default: FALSE).}

\item{cox.cex}{Text size for Cox model annotation.}

\item{show.logrank}{Logical; whether to display log-rank test results (default: FALSE).}

\item{logrank.cex}{Text size for log-rank annotation.}

\item{cox.eps, }{lr.eps Small values for Cox/log-rank calculations.}

\item{show_arm_legend}{Logical; whether to show arm legend.}

\item{arms}{Character vector of arm labels.}

\item{put.legend.arms, }{put.legend.cox, put.legend.lr Legend positions.}

\item{stop.onerror}{Logical; whether to stop on KM curve errors.}

\item{check.KM}{Logical; whether to check KM curve validity.}

\item{lr.digits, }{cox.digits Number of digits for test results.}

\item{tpoints.add}{Additional time points for risk table.}

\item{by.risk}{Interval for risk table time points.}

\item{Xlab, }{Ylab Axis labels.}

\item{col.0, }{col.1 Colors for control and treatment curves.}

\item{show.med}{Logical; whether to annotate median survival.}

\item{med.digits, }{med.font, med.cex, ymed.offset, xmed.fraction Median annotation settings.}

\item{conf.int}{Logical; whether to plot confidence intervals.}

\item{conf_level}{Confidence level for intervals.}

\item{choose_ylim}{Logical; whether to auto-select y-axis limits.}

\item{arm.cex}{Text size for arm legend.}

\item{quant, }{qlabel Quantile and label for annotation.}

\item{risk.cex}{Text size for risk table.}

\item{ltys, }{lwds Line types and widths for curves.}

\item{censor.mark.all}{Logical; whether to mark all censored times.}

\item{censor.cex}{Size of censor marks.}

\item{show.ticks}{Logical; whether to show axis ticks.}

\item{risk.set}{Logical; whether to display risk table.}

\item{ymin, }{ymax, ymin.del, ymin2, risk_offset, risk_delta, y.risk0, y.risk1, show.Y.axis, cex_Yaxis, add.segment, risk.add, xmin, xmax, x.truncate, time.zero, prob.points Additional graphical and calculation parameters.}
}
\value{
Invisibly returns NULL. Used for plotting side effects.
}
\description{
Plots Kaplan-Meier survival curves for two groups (e.g., treatment and control) using precomputed
risk/event counts and survival estimates in counting process format. Optionally displays confidence intervals,
risk tables, median survival annotations, and statistical test results (Cox, log-rank).
}
\details{
The \code{dfcount} list must contain the following elements:
\itemize{
\item at_points: Time points for evaluation.
\item risk.points: Time points for risk table.
\item risk.points.label: Labels for risk table time points.
\item idv0, idv1: Individual IDs for control and treatment.
\item surv0, surv1: Survival estimates for control and treatment.
\item sig2_surv0, sig2_surv1: Variances of survival estimates.
\item idx0, idx1: Indices for control and treatment.
\item cens0, cens1: Censoring indicators.
\item riskpoints0, riskpoints1: Risk set counts for control and treatment.
}
Optionally, \code{quantile_results} for median annotation.

The function plots survival curves, confidence intervals, risk tables, and (optionally) statistical test results and median survival.
}
