% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/df_counting.R
\name{df_counting}
\alias{df_counting}
\title{Creates a counting process dataset for survival analysis}
\usage{
df_counting(
  df,
  tte.name,
  event.name,
  treat.name,
  weight.name = NULL,
  strata.name = NULL,
  arms = c("treat", "control"),
  time.zero = 0,
  tpoints.add = c(0),
  by.risk = 6,
  time.zero.label = 0,
  risk.add = NULL,
  get.cox = TRUE,
  cox.digits = 2,
  lr.digits = 2,
  cox.eps = 0.001,
  lr.eps = 0.001,
  verbose = FALSE,
  qprob = 0.5,
  scheme = "fh",
  scheme_params = list(rho = 0, gamma = 0),
  conf_level = 0.95,
  check.KM = TRUE,
  check.seKM = FALSE,
  draws = 0,
  seedstart = 8316951,
  stop.onerror = FALSE,
  censoring_allmarks = TRUE
)
}
\arguments{
\item{df}{Data frame containing the survival data.}

\item{tte.name}{Name of the time-to-event variable (string).}

\item{event.name}{Name of the event indicator variable (string, 1=event, 0=censored).}

\item{treat.name}{Name of the treatment group variable (string, 0=control, 1=treatment).}

\item{weight.name}{Optional name of the weights variable (string, default NULL).}

\item{strata.name}{Optional name of the stratification variable (string, default NULL).}

\item{arms}{Character vector of length 2 with names for treatment and control arms.}

\item{time.zero}{Time value to use as zero (default 0).}

\item{tpoints.add}{Additional time points to include (numeric vector, default 0).}

\item{by.risk}{Interval for risk table (default 6).}

\item{time.zero.label}{Label for time zero (default 0.0).}

\item{risk.add}{Additional risk points (numeric vector, default NULL).}

\item{get.cox}{Logical; whether to compute Cox model results (default TRUE).}

\item{cox.digits}{Number of digits for Cox model results (default 2).}

\item{lr.digits}{Number of digits for log-rank results (default 2).}

\item{cox.eps}{Threshold for Cox p-value formatting (default 0.001).}

\item{lr.eps}{Threshold for log-rank p-value formatting (default 0.001).}

\item{qprob}{Quantile probability for median/quantile estimation (default 0.5).}

\item{conf_level}{Confidence level for quantile CI (default 0.95).}

\item{check.KM}{Logical; whether to check KM curve fits (default TRUE).}

\item{stop.onerror}{Logical; whether to stop on error (default FALSE).}

\item{censoring_allmarks}{Logical; whether to mark all censoring times (default TRUE).}

\item{rho}{Weighting parameter for log-rank test (default 0).}

\item{gamma}{Weighting parameter for log-rank test (default 0).}
}
\value{
A list containing risk set, event counts, KM estimates, log-rank and Cox results, quantiles, and more.
}
\description{
This function prepares a dataset for survival analysis using the counting process approach,
including risk set, event counts, Kaplan-Meier estimates, log-rank and Cox model results,
and quantile estimates for two groups (treatment and control).
}
