getwd()
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, messages = FALSE)
rm(list=ls())
library(survival)
library(tinytex)
library(dplyr)
library(data.table)
library(gt)
library(weightedSurv)
load("results/simulations1_10k.RData")
# Extract strong-null scenario
library(simtrial)
sim_setup <- res_out$get_setup
# strong null
dgm <- sim_setup$fr[c(14:17),]
fail_rate <- data.frame(stratum = rep("All", 2 * nrow(dgm)),
period = rep(dgm$Period, 2),
treatment = c(rep("control", nrow(dgm)),
rep("experimental", nrow(dgm))),
duration = rep(dgm$duration, 2),
rate = c(dgm$rate, dgm$rate * dgm$hr)
)
enroll_rate <- sim_setup$er
dropout_rate <- sim_setup$dropout_rate
ss <- 87
thisseed <- 8316951 + 1000*ss
set.seed(thisseed)
dat <- sim_pw_surv(n = 698, enroll_rate = enroll_rate,
fail_rate = fail_rate, dropout_rate = dropout_rate)
analysis_data <- cut_data_by_date(dat, 36)
dfa <- analysis_data
dfa$treat <- ifelse(dfa$treatment=="experimental",1,0)
dfcount <- get_dfcounting(df=dfa, tte.name = "tte", event.name = "event", treat.name = "treat", arms = "treatment", by.risk= 3,
scheme = "fh", scheme_params = list(rho = 0, gamma = 1))
load("results/simulations1_10k.RData")
load("../results/simulations1_10k.RData")
load("../vignettes/results/simulations1_10k.RData")
load("../vignettes/results/simulations1_25k.RData")
